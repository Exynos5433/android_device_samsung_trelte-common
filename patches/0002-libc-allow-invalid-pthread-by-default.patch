From e9649235baba3935df500326af36717f93511af8 Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Tue, 12 Dec 2017 16:28:35 +0300
Subject: [PATCH 2/3] libc: allow invalid pthread by default

Change-Id: I2dc456a66b2dca999b64f55aa93d14a186b2314e
---
 libc/Android.bp | 9 +--------
 1 file changed, 1 insertion(+), 8 deletions(-)

diff --git a/libc/Android.bp b/libc/Android.bp
index 0dc308769..f74919f93 100644
--- a/libc/Android.bp
+++ b/libc/Android.bp
@@ -1572,14 +1572,7 @@ cc_library_static {
         "bionic/pthread_sigmask.cpp",
         "bionic/pthread_spinlock.cpp",
     ],
-    product_variables: {
-        lineage: {
-	    allows_invalid_pthread: {
-	        cppflags: ["-DALLOWS_INVALID_PTHREAD"],
-	    },
-        },
-    },
-    cppflags: ["-Wold-style-cast"],
+    cppflags: ["-Wold-style-cast", "-DALLOWS_INVALID_PTHREAD"],
 
     include_dirs: ["bionic/libstdc++/include"],
     name: "libc_pthread",
-- 
2.17.1

